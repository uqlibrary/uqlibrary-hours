<link rel="import" href="elements.html">

<!--
`<uqlibrary-hours>` is a simple element that displays the opening hours for each of the libraries

Example:

    <uqlibrary-hours compact-view="false" auto-load="true"></uqlibrary-hours>

@demo

@demo demo/index.html Demo of the Full view
@demo demo/index-compact.html Demo of the Compact view
-->
<dom-module id="uqlibrary-hours">
  <template>
    <style is="custom-style" include="common-styles">
      :host {
        @apply(--uql-app-host);
      }

      paper-ripple {
        @apply(--layout-fit);
      }

      paper-item {
        cursor: pointer;
        border-bottom: 1px solid var(--border-color);
        padding-left: 16px;

        min-height: 70px;
      }

      /** Full view styles */
      .library-info {
        @apply(--layout-flex);
      }

      .status {
        padding: 5px;
        font-size: 2em;
      }

      .all-day .library-status,
      .open,
      .all-day, .part-all-day {
        color: var(--available-color);
      }

      .closed .library-status,
      .closed {
        color: var(--unavailable-color);
      }

      .notes {
        color: var(--secondary-color);
      }

      paper-item iron-icon.info-icon {
        color: var(--accent-color) !important;
      }

      /** Compact view styles */
      .compact .library-status {
        @apply(--layout-flex-2);
        white-space: nowrap;
      }

      .library-allday {
        @apply(--layout-flex);
        white-space: nowrap;
      }

      paper-item.part-all-day span,
      paper-item.all-day span {
        color: var(--available-color);
      }

      .library-allday iron-icon {
        vertical-align: text-bottom;
      }

      @media all and (max-width: 400px) {
        iron-icon {
          width: 16px;
          height: 16px;
        }
      }

    </style>

    <uqlibrary-api-library-hours id="hoursApi" on-uqlibrary-api-library-hours="hoursLoaded"></uqlibrary-api-library-hours>
    <uqlibrary-ga id="ga" app-name="[[_gaAppName]]"></uqlibrary-ga>

    <!-- Compact View -->
    <template is="dom-if" if="[[compactView]]">
      <!-- Toolbar -->
      <paper-item class="compact header" tabindex="-1">Opening Hours</paper-item>

      <!-- List -->
      <template id="listCompact" is="dom-repeat" items="{{hours}}">
        <paper-item class$="detail-item compact hours-entry [[item.class]]"
                    role="link"
                    aria-label$="[[item.name]] - Opening hours: [[item.times]]"
                    on-tap="_itemTapHandler">
          <paper-ripple></paper-ripple>
          <div class="linked-item body1 library-abbr" title$="{{item.name}}">[[ item.abbr ]]</div>
          <div class="body1 library-status">[[ item.times ]]</div>
          <div class="library-allday body1">
            <span hidden$="[[!item.allDay]]">
                <iron-icon icon="device:access-time"></iron-icon> 24x7
            </span>
            <span hidden$="[[!item.hasInfo]]">
              <iron-icon icon="info" class="info-icon" title$="[[item.notes]]"></iron-icon>
            </span>
          </div>
        </paper-item>
      </template>
    </template>

    <!-- Full View -->
    <template is="dom-if" if="[[!compactView]]">
      <!-- Scaffolding -->
      <div class="fit layout vertical">
        <paper-header-panel class="flex">
          <!-- Header -->
          <paper-toolbar>
            <!-- Toolbar -->
            <template is="dom-if" if="[[!standAlone]]">
              <paper-icon-button icon="menu"
                                 on-tap="_toggleDrawerPanel"
                                 title="open menu button"
                                 aria-label="open menu button"
                                 paper-drawer-toggle>
              </paper-icon-button>
            </template>
            <div class="title uqlibrary-app-title" title="[[headerTitle]]">[[headerTitle]]</div>
          </paper-toolbar>
          <!-- Content -->
          <div class="fit">
            <!-- List of items -->
            <template is="dom-repeat" items="[[hours]]">
              <paper-item
                      class="hours-entry"
                      role="link"
                      title$="[[item.name]]"
                      aria-label$="[[item.name]] - Opening hours: [[item.times]]"
                      on-tap="_itemTapHandler">
                <paper-ripple></paper-ripple>
                <div class="library-info">
                  <div class="linked-item library-name body1">[[item.name]]</div>
                  <div class="library-hours body1">
                    [[item.times]]
                    <span class="notes" hidden$="[[!item.notes]]"> &mdash; [[item.notes]]</span>
                  </div>
                </div>
                <div class$="status [[item.class]]" aria-label$="[[item.class]]">&bull;</div>
              </paper-item>
            </template>
          </div>
        </paper-header-panel>
        <!-- Bottom footer -->
        <paper-toolbar class="uqlibrary-app-footer right">
          <paper-button class="button-colored-accent"
                        on-tap="_viewHoursClicked"
                        title="View hours for this week"
                        aria-label="View hours for this week">
            View hours for this week
          </paper-button>
        </paper-toolbar>
      </div>
    </template>
  </template>
  <script src="uqlibrary-hours.js"></script>
</dom-module>
